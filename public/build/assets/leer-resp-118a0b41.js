import{r as d,e as pe,D as ce,o as l,c as u,d as c,a as o,w as a,b as r,t as I,E as m,f as i,x as me,v as ve,y as B,T as fe,I as _e,h as xe,M as ge,z as ye,u as v,F as M,aL as Y,n as be,aX as ke,_ as Ie,B as we,H as Ce,S as he,j as Ee,aQ as Se,A as $e}from"./app-927b194a.js";import De from"./ficha-f45aa4f6.js";import{S as ze}from"./SearchOutlined-305f9d36.js";import{S as Ne}from"./SaveOutlined-7835c154.js";import{F as G}from"./FormOutlined-4f1f15af.js";import{D as J}from"./DeleteOutlined-ff66373c.js";import{E as Ae}from"./EyeOutlined-3c92c673.js";import"./logotiny-c4b525af.js";import"./logoDAD-c76d0a0b.js";import"./AntdIcon-4e046282.js";const Be={class:"pl-4",style:{background:"white",width:"100%","min-height":"calc(100vh - 190px)","border-radius":"12px"}},Me={class:"flex justify-between mt-2"},Ue={style:{color:"#0000009d","margin-top":"-6px"}},Oe={key:0,class:"mt-3 mb-3",style:{"margin-left":"-5px"}},Te={key:0},Le=["onDblclick"],Fe={key:2,class:"flex",style:{"justify-content":"center"}},Ve={key:0},je={key:1},qe={key:2},Re={key:1,class:"mt-3 mb-3",style:{"margin-left":"-5px"}},He={key:0},Pe={class:"flex justify-between mb-4"},Xe={class:"ant-upload-drag-icon"},at={__name:"leer-resp",props:["proceso"],setup(U){const K=window.location.origin,x=d("contenido"),w=d(),y=d([]),O=d(null),T=U,C=d(!1),h=d(1),W=t=>{const e=t.file.status;e!=="uploading"&&console.log(t.file,y.value),e==="done"?(Y.success(`${t.file.name} archivo(s) subido(s) exitosamente.`),S()):e==="error"&&Y.error(`${t.file.name} falló al subir.`)},Z=()=>{y.value=null},b=d(!1),L=d(0),F=d(0),ee=t=>{b.value=!0,L.value=t.clientY,F.value=t.clientX,t.preventDefault()},E=t=>{t==="1"&&(C.value=!0,b.value=!1)},te=t=>{b.value=!1},V=d([]),j=d([]),g=d(""),S=async()=>{B.post("/get-archivos-res",{term:g.value,proceso:T.proceso}).then(t=>{V.value=t.data.datos.data}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})},$=async()=>{B.post("/get-res",{term:g.value,proceso:T.proceso}).then(t=>{j.value=t.data.datos.data}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})};let q;pe(g,(t,e)=>{clearTimeout(q),q=setTimeout(()=>{$()},300)});const D=d(!1),oe=t=>{O.value=t,D.value=!0};S(),$();const ae=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"Tipo",dataIndex:"tipo",align:"center",width:"100px"},{title:"Nombre",dataIndex:"nombre"},{title:"Area",dataIndex:"area"},{title:"Fecha",dataIndex:"fecha",align:"center"},{title:"Registros",dataIndex:"registros",align:"center"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}],se=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"N° lectura",dataIndex:"n_lectura",align:"center"},{title:"DNI",dataIndex:"dni",align:"center"},{title:"Aula",dataIndex:"aula",width:"60px",align:"center"},{title:"Tip",dataIndex:"tipo",width:"60px",align:"center"},{title:"Litho",dataIndex:"res_litho",align:"center"},{title:"Respuestas",dataIndex:"respuestas",align:"center"},{title:"Observaciones",dataIndex:"observaciones",align:"center"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}],R=t=>{B.get("eliminar-archivo/"+t.id).then(e=>{S(),$(),ne("error",e.data.titulo,e.data.mensaje)})},ne=(t,e,k)=>{be[t]({message:e,description:k})};return(t,e)=>{const k=ke,le=fe,H=_e,p=Ie,f=we,P=Ce,X=xe,z=he,ie=Ee,re=ce("inbox-outlined"),ue=Se,Q=ge,N=$e,de=ye;return l(),u("div",{style:{},onClick:te,onContextmenu:ve(ee,["prevent"])},[c("div",Be,[c("div",Me,[o(le,{value:x.value,"onUpdate:value":e[0]||(e[0]=n=>x.value=n),style:{"margin-left":"-3px"}},{default:a(()=>[o(k,{value:"contenido",style:{"border-radius":"9px 0px 0px 9px"}},{default:a(()=>e[10]||(e[10]=[r("Respuestas")])),_:1}),o(k,{value:"archivos",style:{"border-radius":"0px 9px 9px 0px"}},{default:a(()=>e[11]||(e[11]=[r("Archivos")])),_:1})]),_:1},8,["value"]),r(" "+I(x.value)+" ",1),o(H,{value:g.value,"onUpdate:value":e[1]||(e[1]=n=>g.value=n),style:{"max-width":"260px","border-radius":"6px",height:"32px"},placeholder:"Buscar"},{prefix:a(()=>[c("span",Ue,[o(v(ze))])]),_:1},8,["value"])]),x.value==="archivos"?(l(),u("div",Oe,[(l(),m(X,{columns:ae,"data-source":V.value,key:t.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:a(({column:n,index:A,record:s})=>[n.dataIndex==="nro"?(l(),u("span",Te,I(A+1),1)):i("",!0),n.dataIndex==="nombre"?(l(),u("div",{key:1,style:{width:"100%",cursor:"pointer"},onDblclick:_=>t.customRow(s)},[c("span",null,I(s.nombre),1)],40,Le)):i("",!0),n.dataIndex==="area"?(l(),u("div",Fe,[s.area===1?(l(),u("div",Ve,[o(p,{color:"cyan"},{default:a(()=>e[12]||(e[12]=[r("Biomedicas")])),_:1})])):i("",!0),s.area===2?(l(),u("div",je,[o(p,{color:"orange"},{default:a(()=>e[13]||(e[13]=[r("Ingenierías")])),_:1})])):i("",!0),s.area===3?(l(),u("div",qe,[o(p,{color:"purple"},{default:a(()=>e[14]||(e[14]=[r("Sociales")])),_:1})])):i("",!0)])):i("",!0),n.dataIndex==="acciones"?(l(),u(M,{key:3},[o(f,{type:"success",class:"mr-1",style:{color:"#476175"},onClick:_=>t.cambiarSexo(s.id_postulante,s.sexo),size:"small"},{icon:a(()=>[o(v(Ne))]),_:2},1032,["onClick"]),o(f,{onClick:_=>t.abrirEditar(s),class:"mr-1",style:{color:"blue"},size:"small"},{icon:a(()=>[o(v(G))]),_:2},1032,["onClick"]),o(P,{title:"¿Estas seguro de eliminar?",onConfirm:_=>R(s)},{default:a(()=>[o(f,{shape:"",size:"small",style:{color:"crimson"}},{icon:a(()=>[o(v(J))]),_:1})]),_:2},1032,["onConfirm"])],64)):i("",!0)]),_:1},8,["data-source"]))])):i("",!0),x.value==="contenido"?(l(),u("div",Re,[(l(),m(X,{columns:se,"data-source":j.value,key:t.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:a(({column:n,index:A,record:s})=>[n.dataIndex==="nro"?(l(),u("span",He,I(A+1),1)):i("",!0),n.dataIndex==="observaciones"?(l(),u(M,{key:1},[s.dni===null&&s.ide_litho!==null?(l(),m(p,{key:0,color:"pink"},{default:a(()=>e[15]||(e[15]=[r(" Sin DNI")])),_:1})):i("",!0),s.aula===""?(l(),m(p,{key:1,color:"purple"},{default:a(()=>e[16]||(e[16]=[r(" Sin aula")])),_:1})):i("",!0),s.len_doc!==8&&s.ide_litho!==null&&s.dni!==null?(l(),m(p,{key:2,color:"green"},{default:a(()=>e[17]||(e[17]=[r(" Dni erroneo")])),_:1})):i("",!0),s.vaula===0?(l(),m(p,{key:3,color:"blue"},{default:a(()=>e[18]||(e[18]=[r(" Error de aula")])),_:1})):i("",!0),s.tipo===""&&s.ide_litho!==null?(l(),m(p,{key:4,color:"yellow"},{default:a(()=>e[19]||(e[19]=[r(" Sin tipo")])),_:1})):i("",!0),s.c_tipo===0&&s.ide_litho!==null?(l(),m(p,{key:5,color:"navy"},{default:a(()=>e[20]||(e[20]=[r(" Tipo diferente")])),_:1})):i("",!0),s.c_aula===0&&s.ide_litho!==null?(l(),m(p,{key:6,color:"brown"},{default:a(()=>e[21]||(e[21]=[r(" Aula diferente")])),_:1})):i("",!0),s.ide_litho===null?(l(),m(p,{key:7,color:"crimson"},{default:a(()=>e[22]||(e[22]=[r(" SIN IDE")])),_:1})):i("",!0)],64)):i("",!0),n.dataIndex==="acciones"?(l(),u(M,{key:2},[o(f,{type:"success",class:"mr-1",style:{color:"#476175"},size:"small",onClick:_=>oe(s.id)},{icon:a(()=>[o(v(Ae))]),_:2},1032,["onClick"]),o(f,{onClick:_=>t.abrirEditar(s),class:"mr-1",style:{color:"blue"},size:"small"},{icon:a(()=>[o(v(G))]),_:2},1032,["onClick"]),o(P,{title:"¿Estas seguro de eliminar?",onConfirm:_=>R(s)},{default:a(()=>[o(f,{shape:"",size:"small",style:{color:"crimson"}},{icon:a(()=>[o(v(J))]),_:1})]),_:2},1032,["onConfirm"])],64)):i("",!0)]),_:1},8,["data-source"]))])):i("",!0),o(Q,{visible:C.value,"onUpdate:visible":e[5]||(e[5]=n=>C.value=n),title:"Cargar fichas de respuestas",onOk:Z,centered:!0,style:{"max-height":"calc(100vh - 100px)","overflow-x":"scroll",cursor:"pointer"}},{default:a(()=>[c("div",Pe,[o(ie,{class:"mb-2",style:{width:"75%"},value:h.value,"onUpdate:value":e[2]||(e[2]=n=>h.value=n)},{default:a(()=>[o(z,{value:1},{default:a(()=>e[23]||(e[23]=[r("Biomédicas")])),_:1}),o(z,{value:2},{default:a(()=>e[24]||(e[24]=[r("Ingenierías")])),_:1}),o(z,{value:3},{default:a(()=>e[25]||(e[25]=[r("Sociales")])),_:1})]),_:1},8,["value"]),o(H,{style:{width:"23%"},value:w.value,"onUpdate:value":e[3]||(e[3]=n=>w.value=n),placeholder:"Aula"},null,8,["value"])]),o(ue,{fileList:y.value,"onUpdate:fileList":e[4]||(e[4]=n=>y.value=n),name:"file",multiple:!0,action:v(K)+"/calificacion/carga-res/"+U.proceso+"/"+h.value+w.value,onChange:W,onDrop:t.handleDrop,"list-type":"picture"},{default:a(()=>[c("p",Xe,[o(re)]),e[26]||(e[26]=c("p",{class:"ant-upload-text",style:{width:"100%"}},"Haz clic o arrastra archivos a esta área para cargar",-1)),e[27]||(e[27]=c("p",{class:"ant-upload-hint"}," Soporte para carga única o múltiple. Prohibido subir datos de la empresa u otros archivos prohibidos. ",-1))]),_:1},8,["fileList","action","onDrop"])]),_:1},8,["visible"])]),b.value?(l(),u("div",{key:0,style:me([{position:"absolute",border:"solid 1px #d9d9d943","padding-top":"0px","border-radius":"8px",overflow:"hidden"},{top:`${L.value}px`,left:`${F.value}px`}])},[o(de,{size:"small",style:{"margin-top":"-4px","margin-bottom":"-4px"}},{default:a(()=>[o(N,{key:"1",class:"selec-menu",onClick:e[6]||(e[6]=n=>E("1"))},{default:a(()=>e[28]||(e[28]=[c("div",{style:{"margin-top":"0px"}}," Cargar respuestas ",-1)])),_:1}),o(N,{key:"2",class:"selec-menu",onClick:e[7]||(e[7]=n=>E("2"))},{default:a(()=>e[29]||(e[29]=[c("div",{style:{"margin-top":"0px"}}," Nueva respuesta ",-1)])),_:1}),o(N,{key:"2",class:"selec-menu",onClick:e[8]||(e[8]=n=>E("2"))},{default:a(()=>e[30]||(e[30]=[c("div",{style:{"margin-top":"0px"}}," asdfas ",-1)])),_:1})]),_:1})],4)):i("",!0),o(Q,{visible:D.value,"onUpdate:visible":e[9]||(e[9]=n=>D.value=n),footer:!1,style:{width:"880px"}},{default:a(()=>[o(De,{id_resp:O.value},null,8,["id_resp"])]),_:1},8,["visible"])],32)}}};export{at as default};
