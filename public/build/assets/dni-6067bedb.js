import{a2 as H,r as d,J as K,D as Q,o as r,c as u,d as o,a as l,w as s,F as T,s as W,y as k,B as Y,M as Z,b as f,f as v,t as ee,E as B,u as oe,aL as D,l as te,m as se,j as le,k as ae,I as ne,aM as ie,q as re}from"./app-2841df9f.js";import"./es-8d71fa64.js";const de={class:"mt-12"},ue={class:"flex justify-between border-b-2",style:{"border-bottom":"solid 2px #009DD1","padding-bottom":"8px"}},pe={style:{"margin-top":"-5px"}},fe={class:"mt-3"},ve={class:"flex justify-between",style:{}},ce={class:""},me={key:0},_e={key:1},ge={key:2},be={class:"flex",style:{"margin-top":"0px"}},we={class:""},ye={key:0,class:"mt-2"},xe=["src"],he={key:0,class:"mt-2"},ke=["src"],De={class:"flex justify-end"},Ce={key:0,class:"mt-2"},Ee=["src"],Fe={class:"flex justify-end"},Re={__name:"dni",props:["id_proceso","dni"],setup(j){const C=window.location.origin;H.locale("es");const g=j,P=()=>{c.value=!0},z=t=>{a.value={id:null,observacion:"",tipo:null,fileList:[]},a.id=t.id,a.observacion=t.observacion,p.value=C+"/"+t.url,a.tipo=t.id_tipo,c.value=!0},c=d(!1),E=d([]),I=d([{value:3,label:"DNI"},{value:5,label:"DOCUMENTO C4"},{value:6,label:"CARNÉ DE EXTRANJERÍA"}]),b=d(!1),y=d(null),$=t=>{y.value=t,b.value=!0},F=d(),a=K({id:null,observacion:"",tipo:null,fileList:[]}),V=t=>{console.log(`selected ${t}`)},S=async t=>{(await k.get("/eliminar-dni/"+t)).data.estado==!0?x():console.log("Ocurrió un error")},m=d(!1),p=d(null),L=d(0),N=t=>{if(t.type==="application/pdf"){const e=new FileReader;e.onload=i=>{p.value=i.target.result},e.readAsDataURL(t),a.fileList=[t]}else D.error("¡Solo puedes cargar archivos PDF!");return!1},x=async()=>{const t=await k.post("/get-dnis-postulante",{dni:g.dni,id_proceso:g.id_proceso});t.data.estado==!0?E.value=t.data.datos:console.log("No se encontraron datos")},R=()=>{p.value=null,a.fileList=[]},q=async()=>{await F.value.validateFields();const t=new FormData;a.fileList[0]&&t.append("file",a.fileList[0]),a.id!=null&&t.append("id",a.id),t.append("id_proceso",g.id_proceso),t.append("dni",g.dni),t.append("observacion",a.observacion),t.append("tipo",a.tipo);try{m.value=!0,L.value=0;const e=await k.post("/save-dni",t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer your-auth-token"},onUploadProgress:i=>{L.value=Math.round(i.loaded*100/i.total)}});c.value=!1,m.value=!1,D.success("¡Archivo PDF cargado exitosamente!"),await x()}catch(e){m.value=!1,D.error("Error al cargar el archivo."),console.error("File upload failed:",e)}};return x(),(t,e)=>{const i=Y,_=te,h=se,J=le,w=ae,X=ne,A=Q("upload-outlined"),M=ie,G=re,U=Z;return r(),u(T,null,[o("div",de,[o("div",null,[o("div",ue,[e[7]||(e[7]=o("div",null,[o("span",{style:{"font-weight":"bold","font-size":"1rem",color:"#009DD1"}},"DOCUMENTO DE IDENTIDAD")],-1)),o("div",pe,[l(i,{onClick:e[0]||(e[0]=n=>P())},{default:s(()=>e[6]||(e[6]=[f("Agregar")])),_:1})])]),o("div",fe,[(r(!0),u(T,null,W(E.value,n=>(r(),u("div",{class:"mb-2",key:n},[l(h,{gutter:16},{default:s(()=>[l(_,{xs:24,sm:24,md:24,lg:24},{default:s(()=>[o("div",ve,[o("div",ce,[n.id_tipo==3?(r(),u("div",me,e[8]||(e[8]=[o("span",{class:"font-bold",style:{"font-size":"1rem"}}," DNI",-1)]))):v("",!0),n.id_tipo==5?(r(),u("div",_e,e[9]||(e[9]=[o("span",{class:"font-bold",style:{"font-size":"1rem"}}," DOCUMENTO C4",-1)]))):v("",!0),n.id_tipo==6?(r(),u("div",ge,e[10]||(e[10]=[o("span",{class:"font-bold",style:{"font-size":"1rem"}}," CARNÉ DE EXTRANJERÍA",-1)]))):v("",!0)]),o("div",be,[l(i,{onClick:O=>$(n.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:s(()=>e[11]||(e[11]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye"},[o("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),o("circle",{cx:"12",cy:"12",r:"3"})],-1)])),_:2},1032,["onClick"]),l(i,{onClick:O=>z(n),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:s(()=>e[12]||(e[12]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#1a2843","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[o("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1)])),_:2},1032,["onClick"]),l(i,{danger:"",onClick:O=>S(n.id),style:{width:"20px",height:"20px","padding-left":"3px"}},{default:s(()=>e[13]||(e[13]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[o("polyline",{points:"3 6 5 6 21 6"}),o("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024)]))),128))])])]),o("div",we,[l(U,{visible:c.value,"onUpdate:visible":e[3]||(e[3]=n=>c.value=n),width:"800px",class:"w-full md:w-3/4",title:"Registro de dni",onOk:t.handleOk},{footer:s(()=>[o("div",De,[l(i,{type:"primary",disabled:!p.value,loading:m.value,style:{"margin-top":"16px"},onClick:q},{default:s(()=>[f(ee(m.value?"Subiendo...":"Guardar datos"),1)]),_:1},8,["disabled","loading"])])]),default:s(()=>[l(G,{ref_key:"formDatos",ref:F,name:"form",model:a,rules:t.formRules},{default:s(()=>[l(h,{gutter:16},{default:s(()=>[l(_,{xs:24,sm:24,md:24,lg:24},{default:s(()=>[e[14]||(e[14]=o("label",null,[f("Tipo"),o("span",{style:{color:"red"}},"*")],-1)),l(w,{name:"tipo",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:s(()=>[l(J,{ref:"select",value:a.tipo,"onUpdate:value":e[1]||(e[1]=n=>a.tipo=n),style:{width:"100%"},options:I.value,onFocus:t.focus,onChange:V},null,8,["value","options","onFocus"])]),_:1})]),_:1}),l(_,{xs:24,sm:24,md:24,lg:24},{default:s(()=>[e[16]||(e[16]=o("label",null,[f("Observación"),o("span",{style:{color:"red"}})],-1)),l(w,{name:"observacion"},{default:s(()=>[l(X,{value:a.observacion,"onUpdate:value":e[2]||(e[2]=n=>a.observacion=n),style:{height:"32px"}},{suffix:s(()=>e[15]||(e[15]=[])),_:1},8,["value"])]),_:1})]),_:1}),l(_,{xs:24,sm:24,md:24,lg:24},{default:s(()=>[e[19]||(e[19]=o("label",null,[f("Archivo PDF (Max. 2mb)"),o("span",{style:{color:"red"}},"*")],-1)),a.id==null?(r(),B(w,{key:0,name:"fileList",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:s(()=>[l(M,{"file-list":a.fileList,"before-upload":N,onRemove:R},{default:s(()=>[l(i,null,{default:s(()=>[l(A),e[17]||(e[17]=f(" Seleccionar archivo PDF "))]),_:1})]),_:1},8,["file-list"]),p.value?(r(),u("div",ye,[o("iframe",{src:p.value,width:"100%",height:"300px"},null,8,xe)])):v("",!0)]),_:1})):(r(),B(w,{key:1,name:"fileList"},{default:s(()=>[l(M,{"file-list":a.fileList,"before-upload":N,onRemove:R},{default:s(()=>[l(i,null,{default:s(()=>[l(A),e[18]||(e[18]=f(" Seleccionar archivo PDF "))]),_:1})]),_:1},8,["file-list"]),p.value?(r(),u("div",he,[o("iframe",{src:p.value,width:"100%",height:"300px"},null,8,ke)])):v("",!0)]),_:1}))]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","onOk"]),l(U,{visible:b.value,"onUpdate:visible":e[5]||(e[5]=n=>b.value=n),title:"Registro de título",style:{"min-width":"1000px"}},{footer:s(()=>[o("div",Fe,[l(i,{onClick:e[4]||(e[4]=n=>b.value==!1)},{default:s(()=>e[20]||(e[20]=[f(" Aceptar ")])),_:1})])]),default:s(()=>[l(h,{gutter:16},{default:s(()=>[l(_,{xs:24,sm:24,md:24,lg:24},{default:s(()=>[y.value?(r(),u("div",Ce,[o("iframe",{src:oe(C)+"/"+y.value,width:"100%",height:"500px"},null,8,Ee)])):v("",!0)]),_:1})]),_:1})]),_:1},8,["visible"])])],64)}}};export{Re as default};
