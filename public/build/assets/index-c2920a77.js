import{r as o,e as f,C as Z,D as q,o as i,c as u,a as t,u as v,w as d,F as H,y as x,Z as J,d as p,E as Q,t as W,f as y,b as C,n as I,j as X,I as Y,a6 as ee,_ as ae,B as te,h as ne,i as oe}from"./app-d615f4ff.js";import{_ as se}from"./AuthenticatedLayout-7d11cb42.js";import{S as le}from"./SearchOutlined-2a3d5edb.js";import{F as ie}from"./FormOutlined-47c056d1.js";import{D as de}from"./DeleteOutlined-29e05531.js";import"./logotiny-c4b525af.js";import"./Header-d78d2df3.js";import"./AntdIcon-92f5221f.js";import"./DownOutlined-f402f4da.js";/* empty css                                                            */const ue={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 98px)"}},ce={class:"mr-3"},re={class:"flex justify-between",style:{position:"relative"}},_e={style:{}},ve=["onDblclick"],pe={key:1},me={key:1,class:"flex",style:{"justify-content":"center"}},ge={key:0},fe={key:1},xe={key:2},ye={key:2,style:{display:"flex",gap:"2px"}},he={class:"flex",style:{"justify-content":"flex-end"}},Ne={__name:"index",setup(we){o(!1);const m=o(""),g=o(1),V=o(null),B=o([]),c=o(1),h=o(!1);o("");const D=o([]),n=o({id:null,codigo:"",nombre:"",vacantes:"",estado:!0});f(m,(e,a)=>{r()}),f(c,(e,a)=>{r()}),f(h,(e,a)=>{h.value==!1&&n.value.id!=null&&(n.value.id=null,n.value.codigo=null,n.value.nombre=null,n.value.estado=!0)}),f(g,(e,a)=>{r()});const F=e=>{h.value=!0,n.value.id=e.id,n.value.codigo=e.codigo,n.value.nombre=e.nombre,n.value.nivel_academico=e.nivel_academico,n.value.tipo_autorizacion=e.tipo_autorizacion,n.value.id_facultad=e.id_fac,e.estado==1?n.value.estado=!0:n.value.estado=!1,n.value.area=e.area},N=async()=>{let e=await x.get("get-modalidades-activas");B.value=e.data.datos},r=async(e="")=>{let a=await x.post("get-vacantes-admin?page="+g.value,{modalidad:c.value,term:m.value});D.value=a.data.datos.data,V.value=a.data.datos.total},O=e=>{x.post("delete-vacante",{id_vacante:e.id_vacante}).then(a=>{r(),$("warning","PROGRAMA ELIMINADO",a.data.mensaje)})},P=[{title:"Cod",dataIndex:"codigo_sunedu",width:"60px",align:"center",responsive:["md"]},{title:"Nombre",dataIndex:"programa"},{title:"Vacantes",dataIndex:"vacantes",width:"160px",align:"center",responsive:["md"]},{title:"Estado",dataIndex:"estado",align:"center",width:"80px",responsive:["md"]},{title:"Opciones",dataIndex:"acciones",width:"80px",align:"center"}],E=o([]),S=e=>{console.log("selectedRowKeys changed: ",e),E.value=e};Z(()=>({selectedRowKeys:v(E),onChange:S,hideDefaultSelections:!0}));const $=(e,a,b)=>{I[e]({message:a,description:b})};N(),r();const w=o(null),R=o({}),U=e=>{w.value=e},A=o({id_modalidad:c.value,id_programa:null,estado:null,vacantes:null,id_vacante:null}),z=e=>{w.value=null,A.value=e,delete R.value[e.id_programa],x.post("save-numero-vacantes",{id_vacante:e.id_vacante,id_programa:e.id_programa,vacantes:e.vacantes,id_modalidad:c.value}).then(()=>{I.success({message:"Registro actualizado"}),r()}).catch(()=>{I.error({message:"Error al actualizar"})})};return(e,a)=>{const b=X,M=Y,K=q("row"),G=ee,k=ae,j=te,L=ne,T=oe;return i(),u(H,null,[t(v(J),{title:"Procesos"}),t(se,null,{default:d(()=>[p("div",ue,[t(K,{class:"flex justify-between mb-4"},{default:d(()=>[p("div",ce,[t(b,{ref:"select",value:c.value,"onUpdate:value":a[0]||(a[0]=l=>c.value=l),options:B.value,onFocus:e.focus,onChange:e.handleChange},null,8,["value","options","onFocus","onChange"])]),p("div",re,[t(M,{type:"text",placeholder:"Buscar",value:m.value,"onUpdate:value":a[1]||(a[1]=l=>m.value=l),style:{"max-width":"300px"}},{prefix:d(()=>[t(v(le))]),_:1},8,["value"])])]),_:1}),p("div",_e,[t(L,{columns:P,"data-source":D.value,pagination:!1,size:"small",scroll:{x:380,y:"calc(100vh - 240px)"}},{bodyCell:d(({column:l,index:be,record:s})=>[l.dataIndex==="vacantes"?(i(),u("div",{key:0,onDblclick:_=>U(s.id_programa)},[w.value===s.id_programa?(i(),Q(G,{key:0,value:s.vacantes,"onUpdate:value":_=>s.vacantes=_,min:0,onPressEnter:_=>z(s),onBlur:_=>z(s),autofocus:""},null,8,["value","onUpdate:value","onPressEnter","onBlur"])):(i(),u("span",pe,W(s.vacantes||"0"),1))],40,ve)):y("",!0),l.dataIndex==="estado"?(i(),u("div",me,[s.estado==1?(i(),u("div",ge,[t(k,{color:"blue"},{default:d(()=>a[3]||(a[3]=[C("Activo")])),_:1})])):y("",!0),s.estado==0?(i(),u("div",fe,[t(k,{color:"red"},{default:d(()=>a[4]||(a[4]=[C("Inactivo")])),_:1})])):(i(),u("div",xe,[t(k,{color:"#cdcdcd"},{default:d(()=>a[5]||(a[5]=[C("Sin asignar")])),_:1})]))])):y("",!0),l.dataIndex==="acciones"?(i(),u("div",ye,[t(j,{onClick:_=>F(s),size:"small",style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#1890ff",display:"flex","align-items":"center"}},{default:d(()=>[t(v(ie))]),_:2},1032,["onClick"]),t(j,{onClick:_=>O(s),size:"small",style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#ff4d4f",display:"flex","align-items":"center"}},{default:d(()=>[t(v(de))]),_:2},1032,["onClick"])])):y("",!0)]),_:1},8,["data-source"])]),p("div",he,[t(T,{current:g.value,"onUpdate:current":a[2]||(a[2]=l=>g.value=l),simple:"","page-size":"50",total:V.value},null,8,["current","total"])])])]),_:1})],64)}}};export{Ne as default};
