import{r as s,e as f,C as A,D as H,o as g,c as k,a as o,u as m,w as l,d as c,F as V,y as b,M as T,Z,b as y,E as J,f as N,G as L,n as Q,B as W,I as X,g as Y,H as ee,h as ae,i as oe,k as te,q as le}from"./app-438f99f4.js";import{_ as ne}from"./AuthenticatedLayout-221d7e47.js";import{S as se}from"./SearchOutlined-d1e35f48.js";import{F as ie}from"./FormOutlined-24d380ff.js";import{D as re}from"./DeleteOutlined-8445b32b.js";import"./logotiny-c4b525af.js";import"./Header-0c968c75.js";import"./AntdIcon-b4f9da7f.js";import"./DownOutlined-92343a99.js";/* empty css                                                            */const de={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},ue={class:"mr-3"},me={class:"flex justify-between",style:{position:"relative"}},ce={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Ve={__name:"index",setup(pe){const p=s(""),d=s([]);s([]);const i=s(!1),v=s(1),C=s(null),t=s({id:null,codigo:"",nombre:""}),I=()=>{i.value=!0};f(p,(a,e)=>{u()}),f(i,(a,e)=>{i.value==!1&&t.value.id!=null&&(t.value.id=null,t.value.codigo=null,t.value.nombre=null)}),f(v,(a,e)=>{u()});const P={labelCol:{span:7},wrapperCol:{span:14}},B={nombre:[{required:!0,validator:async(a,e)=>e===""?Promise.reject("Ingrese su el nombre del filial"):Promise.resolve(),trigger:"change"}],codigo:[{required:!0,validator:async(a,e)=>e===""?Promise.reject("Ingrese la sede del filial"):Promise.resolve(),trigger:"change"}]};s([]);const j=a=>{i.value=!0,t.value.id=a.id,t.value.codigo=a.codigo,t.value.nombre=a.nombre},u=async(a="")=>{let e=await b.post("modalidad/get-modalidades?page="+v.value,{term:p.value});d.value=e.data.datos.data,C.value=e.data.datos.total},M=()=>{let a={id:t.value.id,codigo:t.value.codigo,nombre:t.value.nombre};b.post("save-modalidad",a).then(e=>{u(),h("success",e.data.titulo,e.data.mensaje),i.value=!1,t.value.codigo=null,t.value.id=null,t.value.nombre=""})},S=a=>{b.get("eliminar-modalidad/"+a.id).then(e=>{u(),h("warning",e.data.titulo,e.data.mensaje)})},U=[{title:"Cod",dataIndex:"codigo"},{title:"Nombre",dataIndex:"nombre"},{title:"Acciones",dataIndex:"acciones"}],w=s([]),D=a=>{console.log("selectedRowKeys changed: ",a),w.value=a};A(()=>({selectedRowKeys:m(w),onChange:D,hideDefaultSelections:!0}));const h=(a,e,r)=>{Q[a]({message:e,description:r})};return u(),(a,e)=>{const r=W,_=X,E=H("row"),R=Y,$=ee,q=ae,z=oe,x=te,O=le,G=T;return g(),k(V,null,[o(m(Z),{title:"Modalidades"}),o(ne,null,{default:l(()=>[c("div",de,[o(E,{class:"flex justify-between mb-4"},{default:l(()=>[c("div",ue,[o(r,{type:"primary",onClick:I},{default:l(()=>e[6]||(e[6]=[y("Nuevo")])),_:1})]),c("div",me,[o(_,{type:"text",placeholder:"Buscar",value:p.value,"onUpdate:value":e[0]||(e[0]=n=>p.value=n),style:{"max-width":"300px","padding-left":"30px"}},null,8,["value"]),c("div",ce,[o(m(se))])])]),_:1}),o(q,{columns:U,"data-source":d.value,pagination:!1,size:"small"},{bodyCell:l(({column:n,index:F})=>[n.dataIndex==="acciones"?(g(),k(V,{key:0},[o(r,{type:"primary",onClick:K=>j(d.value[F]),size:"small"},{icon:l(()=>[o(m(ie))]),_:2},1032,["onClick"]),o(R,{type:"vertical"}),d.value.length?(g(),J($,{key:0,title:"Â¿Estas seguro de eliminar?",onConfirm:K=>S(d.value[F])},{default:l(()=>[o(r,{type:"danger",shape:"",size:"small"},{icon:l(()=>[o(m(re))]),_:1})]),_:2},1032,["onConfirm"])):N("",!0)],64)):N("",!0)]),_:1},8,["data-source"]),o(z,{current:v.value,"onUpdate:current":e[1]||(e[1]=n=>v.value=n),total:C.value,"show-less-items":""},null,8,["current","total"])])]),_:1}),c("div",null,[o(G,{visible:i.value,"onUpdate:visible":e[5]||(e[5]=n=>i.value=n),title:"Nuevo Programa",style:{"margin-top":"-40px"}},{footer:l(()=>[o(r,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:l(()=>e[7]||(e[7]=[y("Cancelar")])),_:1},8,["onClick"]),o(r,{type:"primary",onClick:e[4]||(e[4]=n=>M())},{default:l(()=>e[8]||(e[8]=[y("Guardar")])),_:1})]),default:l(()=>[o(O,L({ref:"formRef",name:"custom-validation",model:a.formState,rules:B},P,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:l(()=>[o(x,{"has-feedback":"",label:"Codigo",name:"codigo"},{default:l(()=>[o(_,{type:"text",value:t.value.codigo,"onUpdate:value":e[2]||(e[2]=n=>t.value.codigo=n),autocomplete:"off"},null,8,["value"])]),_:1}),o(x,{"has-feedback":"",label:"Nombre",name:"nombre"},{default:l(()=>[o(_,{type:"text",value:t.value.nombre,"onUpdate:value":e[3]||(e[3]=n=>t.value.nombre=n),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["visible"])])],64)}}};export{Ve as default};
