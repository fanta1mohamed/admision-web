import{r as n,e as U,D as T,o as r,c as u,a as s,u as q,d as o,v as z,w as i,F as Z,y as A,B as $,aR as G,h as H,I as J,Z as K,b as f,t as B,f as g,E as j,_ as L}from"./app-0333044c.js";/* empty css                                                                          */import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";import{r as W,u as X}from"./xlsx-4f9172c7.js";const Y={class:"p-4",style:{width:"100%",background:"white","border-radius":"8px"}},ee={class:"flex justify-between"},te={style:{display:"flex","justify-content":"flex-end"}},ae={style:{display:"flex"}},oe={key:0},se={class:"flex justify-end mt-2 mb-4",style:{"margin-right":"-20px"}},ne={style:{color:"#0000009d","margin-top":"-6px"}},re={style:{"margin-right":"-20px"}},ie={key:0},le={key:1,style:{scale:"0.8rem"}},de={key:2},ce={__name:"participantes",props:["proceso"],setup(P){const k=P,v=n([]),l=n(0),w=n(""),_=n(""),D=async()=>{l.value=0;try{const t=await A.post("subir-participantes-simulacro",{data:v.value,proceso:k.proceso},{onUploadProgress:e=>{e.lengthComputable&&(l.value=Math.round(e.loaded/e.total*100))}});console.log("Respuesta del servidor:",t.data),l.value=100,b()}catch(t){l.value=70,w.value="exception",console.error("Error:",t)}},M=t=>{const e=t.target.files[0],d=new FileReader;d.onload=h=>{const m=new Uint8Array(h.target.result),x=W(m,{type:"array"}),I=x.SheetNames[0],y=x.Sheets[I],a=X.sheet_to_json(y,{header:1}),c=a[0],p=a.slice(1).map(O=>{const N={};return c.forEach((F,R)=>{N[F]=O[R]}),N});v.value=p},d.readAsArrayBuffer(e)},S=n([]),b=async()=>{A.post("/get-participantes-externo",{term:_.value,proceso:k.proceso}).then(t=>{S.value=t.data.datos.data}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})};let C;U(_,(t,e)=>{clearTimeout(C),C=setTimeout(()=>{b()},300)}),b();const V=n([{title:"N°",dataIndex:"nro",align:"center"},{title:"DNI",dataIndex:"dni"},{title:"Ap. Paterno",dataIndex:"paterno"},{title:"Ap. Materno",dataIndex:"materno"},{title:"Mombres",dataIndex:"nombres"},{title:"Colegio",dataIndex:"colegio"},{title:"distito",dataIndex:"distrito"},{title:"Area",dataIndex:"area"}]),E=n([{title:"N°",dataIndex:"nro",align:"center"},{title:"DNI",dataIndex:"dni"},{title:"Ap. Paterno",dataIndex:"paterno"},{title:"Ap. Materno",dataIndex:"materno"},{title:"Mombres",dataIndex:"nombres"},{title:"Colegio",dataIndex:"colegio"},{title:"distito",dataIndex:"distrito"},{title:"Area",dataIndex:"area"},{title:"Observaciones",dataIndex:"id_ide",align:"center"}]);return(t,e)=>{const d=$,h=G,m=H,x=T("SearchOutlined"),I=J,y=L;return r(),u(Z,null,[s(q(K),{title:"Inicio"}),o("div",Y,[o("form",{onSubmit:e[0]||(e[0]=z((...a)=>t.submit&&t.submit(...a),["prevent"]))},[o("div",ee,[e[4]||(e[4]=o("label",{for:"fileInput",class:"",style:{"padding-top":"14px",border:"solid 2px var(--primary-color)","border-radius":"6px",cursor:"pointer",padding:"8px 14px"}}," Seleccionar ",-1)),o("input",{id:"fileInput",type:"file",onChange:M,style:{display:"none"}},null,32),o("div",te,[s(d,{class:"mr-2",style:{"border-radius":"5px",height:"38px",border:"solid 1px var(--primary-color)",color:"var(--primary-color)"},onClick:t.descargar},{default:i(()=>e[2]||(e[2]=[f("Plantilla")])),_:1},8,["onClick"]),s(d,{style:{height:"38px","border-radius":"5px",border:"none",color:"white",background:"var(--primary-color)"},onClick:D},{default:i(()=>e[3]||(e[3]=[f(" Subir")])),_:1})])])],32),o("div",ae,[s(h,{percent:l.value,status:w.value},null,8,["percent","status"])]),o("div",null,[s(m,{dataSource:v.value,columns:V.value,size:"small",pagination:!1},{bodyCell:i(({column:a,index:c,record:p})=>[a.dataIndex==="nro"?(r(),u("span",oe,B(c+1),1)):g("",!0)]),_:1},8,["dataSource","columns"])]),o("div",se,[s(I,{value:_.value,"onUpdate:value":e[1]||(e[1]=a=>_.value=a),style:{"max-width":"260px","border-radius":"6px",height:"32px"},placeholder:"Buscar"},{prefix:i(()=>[o("span",ne,[s(x)])]),_:1},8,["value"])]),o("div",re,[s(m,{dataSource:S.value,columns:E.value,size:"small",pagination:!1},{bodyCell:i(({column:a,index:c,record:p})=>[a.dataIndex==="nro"?(r(),u("span",ie,B(c+1),1)):g("",!0),a.dataIndex==="id_ide"?(r(),u("div",le,[p.id_ide==0?(r(),j(y,{key:0,color:"red",class:"small-text",style:{"border-radius":"14px"}},{default:i(()=>e[5]||(e[5]=[f(" sin ide ")])),_:1})):g("",!0),p.area==null?(r(),j(y,{key:1,color:"purple"},{default:i(()=>e[6]||(e[6]=[f(" sin area ")])),_:1})):(r(),u("span",de))])):g("",!0)]),_:1},8,["dataSource","columns"])])])],64)}}},xe=Q(ce,[["__scopeId","data-v-99756cb3"]]);export{xe as default};
